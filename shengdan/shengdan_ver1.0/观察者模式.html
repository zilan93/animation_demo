<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>观察者模式</title>
    <script type="text/javascript" src="js/observer.js"></script>
</head>
<body>
<button>点击触发page任务</button>
<button>点击取消page任务</button>
<script>
    var observer = new Observer();
    function page() {
        setTimeout(function () {
            observer.publish("complete")
        },1000)
    }
    observer.subscribe("complete",function () {
        alert("page任务完成");
    })
    document.querySelectorAll("button")[0].addEventListener("click",function () {
        page();
    },false)
    document.querySelectorAll("button")[1].addEventListener("click",function () {
        observer.unsubscribe("complete");
        alert("注销了订阅了compelte事件");
    },false)
</script>
</body>
</html>